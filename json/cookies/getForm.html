<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="reset.css" />
        <link rel="stylesheet" href="../style.css" />
        <script src="cookieFunctions.js"></script>
        <script src="Get.js"></script>
        <script src="question.js"></script>
    </head>
    <body>
        <script>
            const url = document.location.href;
            const $_GET = getForm( url );
            console.table( $_GET );

            let counter = 0;
            let answers = [];

            for( const prop in $_GET ){
                const encodedVal  = $_GET[prop];
                let val = decodeURIComponent( encodedVal );
                //https://regexr.com/   to test it out 
                let cleaned = val.replace( /\++/g, ' ' );
                $_GET[prop] = cleaned; 
                counter++;
                //after cat and question add the answers to the answer array;
                if( counter > 2 && cleaned != "" ) {
                    answers.push( cleaned );
                }
            }

            //make new question
            let question = new Question( $_GET['number'], $_GET['question'], answers );
            question.display( document.body ); 

            //going to cookie
            const text = JSON.stringify( question );
            let p = document.createElement( "p" );
            p.textContent = "read the cookie and display the question from cookie";
            document.body.appendChild( p );

            setCookie( "object", text, 1 );
            checkCookie( "object" );
            document.write( `${getCookie( "object" )}<br>` );

            //reobject it
            let obj = JSON.parse( getCookie( "object" ) );
            let newQ = new Question( obj );
            newQ.display( document.body );


        </script>  
            <a href="transferCookie.php"><button>Click Me</button></a> 
    </body>
</html>